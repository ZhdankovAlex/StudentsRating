# Рейтинг студентов `*`

Необходимо реализовать утилиту, вычисляющую рейтинг студентов с помощью разных критериев (паттерн стратегия или фабрика). Основные критерии

- по посещаемости
- по полученным "плюсам" за работу на занятиях
- по оценкам за контрольные

Как раз-таки критерии и должны реализовываться с использованием паттернов.

Исполняемый файл должен называться `students-rating`. Дополнительно программа должна уметь добавлять студентов, предметы и учитывать посещаемость/работу на занятиях.

При релизации можно и нужно использовать Qt 5. Либо сторонний парсер JSON/YAML.

## Как считать рейтинг

- **Посещаемость**: по студенту считается его доля посещенных занятий, т.е. `количество занятий, которые он посетил / общее количество занятий`.
- **Плюсы**: по студенту вычисляется доля плюсов, которые он получил из максимально возможно количества: `число плюсов / общее количество занятий` (т.е. за одно занятие можно получить не более одного плюса).
- **Оценки за контрольные**: максимальный балл за одну контрольную — 5, по каждому студенту считается `суммарный балл студента за все контрольные / 5 * общее число контрольных`. Балл может быть числом с плавающей точкой.
- **Средний рейтинг**: `(посещаемость + плюсы + контрольные) / 3`.

## Команды

Должны поддерживаться следующие команды (в квадратных скобках необязательные параметры, в фигурных скобках псевдоним команды):

- `students-rating report --course COURSE [--criteria <attendance, plus, test>] [--table] --sort <rating=desc,test=desc,name=asc>`: построить отчёт по курсу COURSE с использованием одного или более (указанных через запятую) критериев. Отчёт должен строиться в виде текстовой таблицы, если указан флаг `--table`: первый столбец — ФИО студента, второй столбец — средний рейтинг по трём критериям, остальные столбцы — каждый критерий в отдельности. Если флаг не указан, то рейтинг выводится в виде пронумерованного списка, в круглых скобках указывается критерий и рейтинг по каждому студенту (например: `(посещаемость: 0.71, плюсы: 0.1, контрольные: 0.5)`). Если указан флаг `--sort`, то производится сортировка списка/таблица по указанным полям и в указанном порядке (desc — по убыванию, asc — по возрастанию). Если опция сортировки не указана, то сортировка производится по среднему рейтингу по убыванию.

Дополнительные команды `*`:

- `students-rating {add-progress, apr} [--course COURSE_NAME] [--criteria <attendance, plus, test>] [--student-name, -n STUDENT_NAME] [--date, -d DATE]`: добавляет в журнал информацию о том, что студент присутствовал на занятии по предмету `COURSE_NAME`. Если опускается `--criteria`, то по умолчанию используется `attendance` (`plus` – работа на занятиях, `assignment` — самостоятельная работа дома, `test` — контрольные). Если опускается `--course`, то программа предлагает выбрать предмет из списка с помощью указания номера, список должен быть отсортирован по алфавиту. Если опускается `--student-name`, то программа предлагает выбрать студента из списка. Если опускается `--date`, то берётся текущая дата в качестве даты проведения занятия. Например:
```
students-rating add-attendance
--> Отметка о посещаемости
--> Выберите курс (1-3):
1. Алгебра ПМИ-11БО
2. Математический анализ ПМИ-21БО
3. Концепции современного естествознания ПМИ-31БО
> 2

--> Выберите группу (1-3)
1. ПМИ-11БО
2. ПМИ-21БО
3. ПМИ-31БО
> 2

--> Выберите студентов через пробел (1-2)
1. Александр Александров
2. Иван Иванов
> 1 2

--> Введите дату (пустая строка, если текущая дата)
> 2019/04/04

--> Сохранено
```
- `students-rating {add-student, ast} [--group, -g GROUP_NAME --student-name, -n STUDENT_NAME] [--course, -c COURSE_NAME]`: добавляет указанного студента в группу и курс. Если опускаются параметры, то программа должна в интерактивном режиме просить ввести данные.
- `students-rating add-course COURSE_NAME`: добавляет курс с указанным названием, после добавления курса предлагает в интерактивном режиме добавить группу и студентов.

Ещё дополнительные команды `**`:

- Удаление студента из предмета.
- Редактирование имени студента.
- Редакирование посещаемости студента в выбранном курсе.

## Хранение данных

Данные должны храниться в формате JSON или YAML (на выбор): отдельно хранятся списки студентов по группам и предметы. По умолчанию данные должны храниться в папке `.students-rating` в домашней директории пользователя, имена файлов в нижнем регистре.

Хранить можно следующим образом:

```
.students-rating
├── courses
│   ├── математический анализ пми-21бо.json
│   ├── функциональный анализ пми-21бо.json
│   └── дифференциальные уранвения пми-22бо.json
└── groups
    ├── пми-21бо.json
    └── пми-22бо.json
```

Файл `пми-21бо.json`:

```
{
    "students": [
        {
            "name": "Иванов Иван",
            "id": 1
        },
        {
            "name": "Плюшкин Василий",
            "id": 2
        },
    ]
}
```

Файл `математический анализ пми-21бо.json`:

```
{
    "group": "пми-21бо",
    "progress": {
        "1": {
            "2019/01/01": {"plus": true, "attendance": true, "test": 3.5},
            "2019/07/01": {attendance": true},
        },
        "2": {
            "2019/01/01": {attendance": true, "test": 1.5},
            "2019/07/01": {"plus": true, "attendance": true},
        }
    }
}
```

Связь идёт через числовой идентификатор студента уникальный внутри группы.
